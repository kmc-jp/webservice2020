# 旧式JSについて

## 概要
ここには今までに記さなかった旧式のJSの一部の説明を載せておきます。興味があれば見てください。

## 目次
<!-- TOC -->

- [旧式JSについて](#旧式jsについて)
    - [概要](#概要)
    - [目次](#目次)
    - [補足 - +演算子をもちいた 文字列 => 数値 変換 -](#補足---演算子をもちいた-文字列--数値-変換--)
    - [変数の巻き上げ](#変数の巻き上げ)

<!-- /TOC -->

## 補足 - +演算子をもちいた 文字列 => 数値 変換 -

+演算子は、文字列を数値に変換する性質も持っています。次の例を見てください。

```js
console.log("3" + 3);  // => 33
console.log(+"3" + 3); // => 6
```

このように、文字列の前に`+`演算子を付けることで、簡単に数値へと変換することができます。

先程の例ではうまく変換できましたが、ひねくれたユーザが文字列を入力するかもしれません。その場合は次のようになります。

```js
console.log(+"「さん」のつもり"); // => NaN
```

## 変数の巻き上げ
このJavaScriptに於いて、巻き上げルールは関数の限りではありません。次の例を見てください。


```js
function awesome_func_1(){
    var x = "Hello";
    console.log(x);

    var y = function (){
        console.log(x);
        var x = "NULL";
    }

    y();

    console.log(x);
}

```

Go言語などに慣れた人であれば、きっと次のような出力を期待することでしょう。

```
Hello
Hello
NULL
```

しかし、JavaScriptではこうなりません。正しくは次のようになります。

```
Hello
undefined
Hello
```

これは先程の関数の巻き上げと同様の操作が変数に於いても行われていることによります。if文内で記述されているlet節により、関数の宣言だけ先行しているのです。注意しなければいけないのは、次のような記述をしても初期化はなされません。

```js
console.log(x); // -> undefined
var x = 5;
```

この、宣言だけされて、初期化されていない空白のことを、
**TDZ(Temporal Dead Zone)**
と呼びます。

このような記法はバグの原因になりますし、そもそも見にくいです。できるだけ宣言は関数の先頭で行うように心がけましょう。
