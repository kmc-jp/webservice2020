# shellコマンド(基礎)
[最初](readme.md)
[SSH](ssh.md)
## 目次
<!-- TOC -->

- [shellコマンド(基礎)](#shellコマンド基礎)
    - [目次](#目次)
    - [概要](#概要)
    - [shellって何よ](#shellって何よ)
    - [基本](#基本)
        - [部位の名称](#部位の名称)
        - [コメントアウト](#コメントアウト)
        - [ディレクトリの記法](#ディレクトリの記法)
            - [ルートディレクトリ](#ルートディレクトリ)
            - [ファイル / ディレクトリ](#ファイル--ディレクトリ)
            - [サブディレクトリ](#サブディレクトリ)
            - [特殊なパス](#特殊なパス)
        - [相対パスと絶対パス](#相対パスと絶対パス)
        - [作業ディレクトリ(ワーキングディレクトリ / カレントディレクトリ)](#作業ディレクトリワーキングディレクトリ--カレントディレクトリ)
    - [コマンド](#コマンド)
        - [基本操作](#基本操作)
        - [ファイル / ディレクトリ操作](#ファイル--ディレクトリ操作)
            - [補足 rm -rfについて](#補足-rm--rfについて)
    - [出力先の変更](#出力先の変更)
    - [命令の強制終了](#命令の強制終了)
    - [ログアウト](#ログアウト)
    - [コマンドおわり](#コマンドおわり)

<!-- /TOC -->
## 概要
GitやGitHub、その他プログラムを実行したりするためにコマンドラインを使えるようになることは必須といっても過言ではありません。今回はその中でもbashやzshなどの基礎的なコマンドを取り上げます。

## shellって何よ
計算機の中枢に命令を伝えるためのインターフェースのことです。bashやzshはこれに含まれます。初回から使ってもらっているGit bashはbashだし、macの方はzsh(bash)を基本的につかっているはずです。

## 基本
### 部位の名称
次のように入力します。

```sh
$ コマンド -オプション 引数1 引数2 ...
```

**コマンド**
は実際に命令する内容を指定します。
**オプション**
は`-`(ハイフン)からはじまり、動作の種類を指定したりします。
**引数**
は実際に作用させる相手だったり、実行内容だったりそのときによって変化します。

### コメントアウト
コマンド上の`#`から始まる文字列は全て無視されます。敢えて含めたいときは`\`(バックスラッシュ)を前につけることで入力できます。これを
**エスケープ**
する、といいます。

例:

```sh
$ echo Foooo! # ココはコメント
Foooo!
$ echo \#コメントではない
#コメントではない
```

### ディレクトリの記法
#### ルートディレクトリ
ディレクトリにはその最も上層となる階層が存在します。そのディレクトリのことをルートディレクトリと言い、一般に次のように記述します。

```sh
/
```

#### ファイル / ディレクトリ
ルートディレクトリの中に含まれるファイルのパスは次のように示されます。
```sh
/ファイル名
```

#### サブディレクトリ
ディレクトリの中にはディレクトリを再帰的に作ることができ、次のように`/`を挟むことでそのディレクトリの中のディレクトリ(サブディレクトリ)であることを示します。

```sh
/Dir1/Dir2/
```

#### 特殊なパス
次の二つは断りなく一般的に使うことができます。

```sh
/ # ルートディレクトリ
~ # ホームディレクトリ
```

ただし、ホームディレクトリとは、シェルを起動したとき、最初にいるパスのことです。

### 相対パスと絶対パス
これまでのように、ルートディレクトリを起点として書かれたパスのことを絶対パスと言い、ある階層のディレクトリを起点にして書かれる パスのことを相対パスと言います。但し、上階のことは`..`、現階のことを`.`で記述します。

```sh
../../Dir2 # 相対パス
/Dir1/Dir2 # 絶対パス
```

### 作業ディレクトリ(ワーキングディレクトリ / カレントディレクトリ)
コマンドラインでは常に自分のいるディレクトリが存在し、そのディレクトリを起点にして操作が実行されます。先述のとおり、最初はディレホームクトリが作業ディレクトリとなっています。

## コマンド
列挙するとこんな感じです。

### 基本操作

|コマンド|内容|主なオプションなど|引数|
| --- | --- | --- | --- |
|echo|入力をそのまま返します。||1:任意|
|cat|選択したファイルの中身を出力します||1:ファイル名|
|pwd|作業ディレクトリの絶対パスを表示|||
|ls|作業ディレクトリの構成を表示します。|`-a`:隠しファイルを含める場合<br>`-l`:権限情報なども含める場合|1:表示先<br>作業ディレクトリは省略可|
|cd|作業ディレクトリを移動します。||1:移動先<br>但し、ホームディレクトリに戻るときは省略可|

### ファイル / ディレクトリ操作

|コマンド|内容|主なオプションなど|引数|
| --- | --- | --- | --- |
|touch|指定した名前のファイルを作成します||1:作成するファイル名|
|cp|指定したファイルを複製します。|`-r`:ディレクトリを複製する場合|1:複製元2:複製先|
|mv|指定したファイルを移動/再命名します||1:移動元2:移動先|
|rm|指定したファイルを削除します|`-r`:ディレクトリを削除する場合|1:削除するもの|
|mkdir|指定した名前のディレクトリを作成します|`-p`:複数の階層のディレクトリを同時に作成する場合|1:作るディレクトリの名称|


#### 補足 rm -rfについて
ディレクトリごと削除するとき、`rm -rf ディレクトリ名`というコマンドで警告無くファイルなりディレクトリなりを削除できます。

このコマンドは
**十分に注意して**
実行せねばなりません。

下手をすると一回のコマンド実行でOSが起動できなくなり得ます。特に
**絶対に実行してはいけないコマンド**
を次に挙げます。

```sh
$ rm -rf / # ルートディレクトリの削除 全てのデータが飛びます
$ rm -rf ~ # ホームディレクトリの削除 全てのカレントユーザデータが削除されます
```

おそらく殆どの人がこのコマンドを故意に実行することはありません。しかし、間違えて実行してしまう可能性は十分にあるので、次の点に注意しましょう。

1. 絶対パスでの削除はできるだけしない。
2. `~`から始まるファイルの削除は`mv`コマンドで名前変更して削除する。

慣れたころにやらかす恐れがあるので、やばそうな名前のファイルを操作するときは名前変更する癖を積極的つけていきましょう。

では、例として`~`という名のディレクトリを削除するときの方法を記しておきます。

```sh
$ mv \~ hoge   # 名前をhogeに変更
$ rm -rf hoge  # 削除
```

## 出力先の変更
コマンドを特に指定なしに実行したとき、その出力先は標準出力(=端末の画面)になりますが、この先にファイルを指定することも出来ます。

一般に次の形で示されます。

1. 出力先のファイルを上書き

```sh
$ コマンド > 先となるファイル
```

2. 出力先のファイルに追記

```sh
$ コマンド >> 先となるファイル
```

例:

```sh
$ echo HOGEHOGE # 標準出力に出力
HOGEHOGE
$ echo HOGEHOGE > hoge.txt # hoge.txtに上書き出力
$ cat hoge.txt # hoge.txtの内容を出力
HOGEHOGE
$ echo FUGAFUGA > hoge.txt # hoge.txtに上書き出力 
$ cat hoge.txt # hoge.txtの内容を出力
FUGAFUGA
$ echo HOGEHOGE >> hoge.txt # hoge.txtに追記
FUGAFUGA
HOGEHOGE

```

## 命令の強制終了
`Ctrl + C`を押すことで実行を止めることができます。覚えておきましょう。

## ログアウト
シェルからログアウトするときは、`Ctrl + D`を押しましょう。EOFが送信されログアウトされます。

## コマンドおわり
コマンドは使っていれば勝手になじんでゆくので、次第になれていきましょう。

[常態化の方法](ssh.md)