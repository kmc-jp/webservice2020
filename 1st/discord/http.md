# HTTPプロトコル
## 概要
みなさんが普段つかっているブラウザは、どのようにしてデータをサーバから受けとっているのでしょうか。今回はWebの仕組みを簡単に解説します。

## プロトコル(通信方式)
ある端末が他の端末と通信するとき、ここにはどのように通信するのかの約束事があります。この約束事を一般に、
**プロトコル**
と呼びます。世の中に沢山あるプロトコルのうち、WebブラウザとWebサーバの間の情報を送受信するときは、主に
**HTTP(Hypertext Transfer Protocol)**
と呼ばれるものを用います。

## メソッド
HTTPプロトコルには
**GET, POST**
, PUT, HEAD, DELETE, OPTIONS, TRACE, CONNECTからなる8個のメソッド(通信方法)があります。これから僕たちがWebServiceを作るうえで重要なのは、このうちGETとPOSTメソッドです。最低でもこの二つは覚えましょう。

|メソッド|目的|
|----|----|
|**GET**|指定したURIのデータを要求する。<br>クライアントにデータを返すことができる。|
|**POST**|サーバに各種データを転送。<br>主に新しい情報を転送する目的。|
|PUT|サーバに各種データを転送。<br>基本的に既存のデータを更新する目的。|
|DELETE|サーバ上のデータを削除する|
|OPTIONS|サーバ情報の請求|
|HEAD|リソースの存在を検証|
|TRACE|サーバまでの通信経路の検証|
|CONNECT|TCPトンネル構築。|

## HTTPステータスコード
クライアントとの通信で、その通信内容次第でサーハはクライアント側に3桁のステータスコードを返します。とりあえず、100, 200, 300番台が問題なしで、400, 500番台がなにかしらの問題が発生しているということは覚えておきましょう。

以下が主要なステータスコードです。

<table>
    <tr>
        <th>概略</th><th>コード</th><th>タイトル</th><th>内容</th>
    </tr>
    <tr>
        <td>情報</td><td>100</td><td>Continue</td><td>さしあたって情報を受け取ったことを示す。</td>
    </tr>
    <tr>
    <td rowspan="2">成功</td><td>200</td><td>OK</td><td>リクエストが達せられたことを示す。</td>
    </tr>
    <tr>
        <td>201</td><td>Created</td><td>リクエストが達せられ、あらたなリソースが追加されたことを示す。</td>
    </tr>
    <tr>
        <td rowspan="5">リダイレクト</td><td>301</td><td>Moved Permanently</td><td>リソースが恒久的に移動したことを示す。<br>クライアントは正しいページに移動される。</td>
    </tr>
    <tr>
        <td>302</td><td>Found</td><td>リソースが一時的に移動したことを示す。</td>
    </tr>
    <tr>
        <td>303</td><td>See Other</td><td>他のページに移動するべきことを示す。</td>
    </tr>
    <tr>
        <td>307</td><td>Temporary Redirect</td><td>リソースが一時的に移動したことを示す。</td>
    </tr>
    <tr>
        <td>308</td><td>Permanent Redirect</td><td>リソースが恒久的に移動したことを示す。<br>クライアントは正しいページに移動される。</td>
    </tr>
    <tr>
        <td rowspan="6">クライアントエラー</td><td>400</td><td>Bad Request</td><td>リクエストが不正で要求が達せられなかったことを示す。</td>
    </tr>
    <tr>
        <td>401</td><td>Unauthorized</td><td>認証が不正なことを示す。</td>
    </tr>
    <tr>
        <td>403</td><td>Forbidden</td><td>リソースに触れるための権限が不足していることを示す。</td>
    </tr>
    <tr>
        <td>404</td><td>Not Found</td><td>リソースが見つからないことを示す。</td>
    </tr>
    <tr>
        <td>408</td><td>Request Timeout</td><td>リクエストを達するのに時間がかかりすぎたことを示す。</td>
    </tr>
    <tr>
        <td>418</td><td>I'm a teapot</td><td>クライアントがコーヒーを淹れようとして、サーバーがティーポットだったことを示す☕</td>
    </tr>
    <tr>
        <td rowspan="1">サーバエラー</td><td>500</td><td>Internal Server Error</td><td>サーバの内部エラー時に返される。辛い。</td>
    </tr>
</table>

詳しくは
[ココ](https://ja.wikipedia.org/wiki/HTTP%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89)
を参照

## ページデータを取得するまでの流れ
![通信](https://kmc.gr.jp/~tkmax777/data/webservice/4th/web.jpg)

通信を開始するとき、まずクライアントがGET Requestをサーバに送り、サーバ側は対応するデータを返送します。通常のWebページはこのときにHTMLファイルを返します。HTMLについては次回学ぶので、今回は深くふれません。

## データのアップロード
クライアントがサーバにデータを送信するときは、前述のメソッドに基づいて、大抵GETかPOSTメソッドが用いられます。

GETでデータを送信する場合は、その内容は基本的にデータを参照するときで、POSTを使うときは、あらたなデータを送信するときです。いずれの場合もhttpプロトコルを用いる場合通信内容が盗聴される可能性があることに気を付けてください。(httpsプロトコルをもちいれば、暗号化されます。)

## 以上
サーバの事をもっと詳しくしりたい場合は自分でたててみると理解が捗ります。是非やってみてください。